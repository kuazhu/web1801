<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>014-单例模式-皇帝上朝.html</title>
	<script>

		(function(w){
			var king = null;
			function King(){
				/*
				方法一
				var slef = this;

				return (function(){
					return function(){
						if(!king){
							slef.name = '皇帝';
							slef.id = Math.random();
							king = slef;	
						}
						return king;						
					}
				})()();
				*/
				
				//方法二
				if(!king){
					this.name = '皇帝';
					this.id = Math.random();
					king = this;	
				}

				return king;
				

			}

			King.prototype = {
				constructor:King,
				__proto__:Object.prototype,
				say:function(){
					console.log(this.name + this.id + ' say::平身');
				}
			}
			// King.getKing = (function(){
			// 	var king = null;
			// 	return function(){
			// 		if(!king){
			// 			king = new King();
			// 		}
			// 		return king;
			// 	}
			// })();
			w.King = King;

		})(window);

		// console.log(King.getKing);
		King.getKing();
		for(var i = 1;i<=5;i++){
			console.log("day "+i);
			new King().say();
			// King.getKing().say();

		}
		
	</script>
</head>
<body>
	
</body>
</html>